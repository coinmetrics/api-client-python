# Examples

This section contains example scripts found in the [examples directory](https://github.com/coinmetrics/api-client-python/tree/master/examples). The examples in this repository are meant to be simple template scripts, mainly showing how to export large amounts of structured data from the API, and focus on getting to specific outcomes using specific functionality of the API Client. Although they are not meant to be for data exploration, they can be configured to other use-cases. For example, [metrics_exporter_json.py](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/metrics_exporter_json.py) by default exports two metrics for `btc`, but if your desired export had other assets like `ada`, `eth`, or `algo` and 
wanted to query `ReferenceRateUSD` as well, it would be as simple as changing the values for `ASSETS_TO_EXPORT` and 
`METRICS`. 

If this is your first time using the API Client, we recommend you follow [this walkthrough](https://docs.coinmetrics.io/tutorials-and-examples/tutorials/walkthrough_community). To explore the data for broader, data-specific use-case, see our [Tutorials](https://docs.coinmetrics.io/tutorials-and-examples/tutorials).
To learn more about the data itself, see the [Product Documentation](https://www.docs.coinmetrics.io) for general knowledge about Coin Metrics data. 

## Example Types

The types of examples below are divided into two groups: 

"Current" examples represent the most up-to-date, recommended ways of using the Python API Client. 

"Legacy" examples represent older usage patterns of the Python API Client, which generally work but may be suboptimal. They were created before major optimization updates (Parallelization, DataFrames, etc.) to the Python API Client. Use them at your own risk.

**Current Examples**

* Notebooks - These examples are Python Jupyter notebooks that provide runnable examples showing how to use the Python
API examples for data analysis/ data exploration. See [Tutorials](https://docs.coinmetrics.io/tutorials-and-examples/tutorials) for a more complete set of cases. 
* Streaming data - These examples show how to [CoinMetrics websocket endpoints](https://docs.coinmetrics.io/api/v4#tag/Timeseries-stream)
* Parallel Exports - These examples export data using parallelization. **We strongly recommend using these over the legacy data export scripts below**.

**Legacy Examples**

* Jsonl exporter - These examples export data to one or multiple [json line](https://jsonlines.org/) files. This is a 
useful format for storing and working with arbitrarily large amounts of data compared to standard JSON. In order to 
parse normal JSON files you need to load the entire file into memory, which may be unfeasible if the file is a GB+ in size,
but json line files can be read, appended to, or processed line by line and scale as long as your machine has memory. 
* CSV exporter - These examples export data to csv. CSV files are not as useful for large files or nested data structures,
but can be easier to work with for data analysis tasks and for use by non-programmers. 
with the API client. Websockets are useful for getting real time data as quick and performant as possible, but can 
require additional overhead to use compared to HTTP endpoints
* Flat files exporter - These examples leverage our flat files server, which is best used to download large amounts of 
historical data for backfilling or data analysis purposes. 


### Example Directory (Current)

| Route                                                                                                                                                                   | Description                                                                                                                               | Example Type        |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| [general api usage #2](https://github.com/coinmetrics/api-client-python/blob/master/examples/notebooks/walkthrough_community_python_event.ipynb)                        | Notebook that shows some of the more advanced features offered by the API, and features a case study of the BTC mining crackdown in China | notebook            |
| [community api usage](https://github.com/coinmetrics/api-client-python/blob/master/examples/notebooks/walkthrough_community.ipynb)                                      | Notebook that gives an overview of the features offered for free as part of the Community API                                             | notebook            |
| [/timeseries/market-quotes](https://github.com/coinmetrics/api-client-python/blob/master/examples/notebooks/Option-Chain-Example.ipynb)                                 | Notebook that shows how to use Python Pandas to process data related to btc options offered by deribit                                    | notebook            |
| [/timeseries-stream/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/websockets/timeseries_stream_asset_metrics.py)                 | Example script showing how to interact with streaming websockets endpoint for btc and eth ReferenceRates                                  | streaming data      |
| [/timeseries-stream/market-candles](https://github.com/coinmetrics/api-client-python/blob/master/examples/websockets/timeseries_stream_market_candles.py)               | Example script showing how to interact with streaming market candles from a coinbase btc-usd market                                       | streaming data      |
| [/timeseries-stream/market-orderbooks](https://github.com/coinmetrics/api-client-python/blob/master/examples/websockets/timeseries_stream_market_orderbooks.py)         | Example script showing how to interact with streaming market orderbooks for a binance btc-usdt pair                                       | streaming data      |
| [/timeseries-stream/market-quotes](https://github.com/coinmetrics/api-client-python/blob/master/examples/websockets/timeseries_stream_market_quotes.py)                 | Example script showing how to interact with streaming market quotes for all markets                                                       | streaming data      |
| [/timeseries-stream/market-trades](https://github.com/coinmetrics/api-client-python/blob/master/examples/websockets/timeseries_stream_market_trades.py)                 | Example script showing how to interact with streaming market trades for a coinbase btc-usd spot market                                    | streaming data      |
| [/timeseries/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/parallel_data_export/btc_1m_metrics_export.py)                           | Example script showing how to export metrics in parallel at high frequency                                                                      | parallel exports      |
| [/timeseries/market-candles](https://github.com/coinmetrics/api-client-python/blob/master/examples/parallel_data_export/candles_csv_export.py)                           | Example script showing how to export candles using parallelization                                                                      | parallel exports      |
| [/timeseries/market-candles](https://github.com/coinmetrics/api-client-python/blob/master/examples/parallel_data_export/candles_csv_export_manual.py)                           | Example script showing how parallelization works, using the candles CSV export as a case-study.                                                                      | parallel exports      |
| [/timeseries/market-orderbooks](https://github.com/coinmetrics/api-client-python/blob/master/examples/parallel_data_export/market_orderbooks_csv_export.py)                           | Example script showing how to export market orderbook data, which is usually data intensive.                                                                    | parallel exports      |
| [/timeseries/market-orderbooks](https://github.com/coinmetrics/api-client-python/blob/master/examples/parallel_data_export/market_orderbooks_csv_export.py)                           | Example script showing how to export market orderbook data, aggregated by day.                                                                    | parallel exports      |
| [/timeseries/market-trades](https://github.com/coinmetrics/api-client-python/blob/master/examples/parallel_data_export/market_trades_list.py)                           | Example script showing how to export market trades data.                                                                    | parallel exports      |


### Example Directory (Legacy)

| Route                                                                                                                                                                   | Description                                                                                                                               | Example Type        |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| [/timeseries/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/bbb_metrics_json_exporter.py)                           | Function to export all metrics for a given asset, in this case 'btc'                                                                      | jsonl exporter      |
| [/timeseries/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/eod_metrics_csv_exporter.py)                            | Function to export end of day metrics for a given asset, in this case 'btc'                                                               | csv exporter        |
| [/timeseries/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/filtered_reference_rates_by_market_cap.py)              | Function to export reference rates for assets above a provided market cap                                                                 | jsonl  exporter     |
| [/timeseries/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/metrics_exporter_json.py)                               | Generic asset exporter for 'btc', easily adjustable to add other assets or metrics                                                        | jsonl exporter      |
| [/timeseries/asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/reference_rates_json_exporter.py)                       | Generic reference rates exporter, can add other metrics or assets as needed                                                               | jsonl exporter      |
| [/timeseries/asset-pair-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/asset_pair_metrics_json_exporter.py)               | Exports several asset-pair metrics for eth, btc, and ada to usd pairs, extensible to all asset pair metrics                               | jsonl exporter      |
| [/timeseries/institution-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/asset_metrics/institution_metrics_json_exporter.py)             | Exports 1d metrics for grayscale                                                                                                          | jsonl exporter      |
| [/timeseries/exchange-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/exchange_metrics/exchange_metrics_json_exporter.py)                | Exports all 1d exchange metrics for all exchanges, can be reduced in scope                                                                | jsonl exporter      |
| [/timeseries/market-contract-prices](https://github.com/coinmetrics/api-client-python/blob/master/examples/futures_data/market_contract_prices_json_exporter.py)        | Exports market contract prices data for first 100 ETH based options contracts, can be increased in scope to export much more              | jsonl exporter      |
| [/timeseries/market-greeks](https://github.com/coinmetrics/api-client-python/blob/master/examples/futures_data/market_greeks_json_exporter.py)                          | Exports market greeks data for first 100 ETH based options contracts, can be increased in scope to export much more                       | jsonl exporter      |
| [/timeseries/market-liquidations](https://github.com/coinmetrics/api-client-python/blob/master/examples/futures_data/market_liquidations_json_exporter.py)              | Exports market liquidations for ETH based contracts on FTX, can be increased in scope to export much more                                 | jsonl exporter      |
| [/timeseries/market-openinterest](https://github.com/coinmetrics/api-client-python/blob/master/examples/futures_data/market_open_interest_json_exporter.py)             | Exports market open interest for BTC based futures contracts, can be increased in scope to export much more                               | jsonl exporter      |
| [/timeseries/exchange-asset-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/exchange_asset_metrics/metrics_json_exporter.py)             | Generic exchange asset metrics exporter, exports basis_annualized_90d_exp for binance-btc in this case                                    | jsonl exporter      |
| [/timeseries/market-orderbooks](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/books_json_exporter.py)                               | Exports market orderbooks for btc/usd pairs on Binance, can be used for any other purpose                                                 | jsonl exporter      |
| [/timeseries/market-candles](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/candles_json_exporter.py)                                | Generic script to export market candles for btc/usd pairs, extensible to all                                                              | jsonl exporter      |
| [/timeseries/market-funding-rates](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/funding_rates_json_exporter.py)                    | Script to export market funding rates for btc/usd pairs, extensible to all                                                                | jsonl exporter      |
| [/timeseries/index-levels](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/indexes_json_exporter.py)                                  | Script to export index levels for CMBIBTC and CMBIETH, works for whole CM index universe                                                  | jsonl exporter      |
| [/timeseries/market-implied-volatility](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/options_implied_vol_json_exporter.py)         | Script that exports all market implied volatility measures available, can be reduced in scope                                             | jsonl exporter      |
| [/timeseries/market-orderbooks](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/orderbooks_flattened_csv_exporter.py)                 | Script to export all market orderbooks, can be reduced in scope                                                                           | csv exporter        |
| [/timeseries/market-quotes](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/quotes_json_exporter.py)                                  | Script to export all market quotes for options, can be reduced in scope or made to include futures and spot quotes as well                | jsonl exporter      |
| [/timeseries/market-trades](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/trades_csv_exporter.py)                                   | Script to export futures trades over a subset of exchanges and future markets, easily modified                                            | csv exporter        |
| [/timeseries/market-trades](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/trades_json_exporter.py)                                  | Script to export market trades for btc/usd market for futures and spot trades across all exchanges                                        | jsonl exporter      |
| [/timeseries/market-metrics](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/market_metrics_json_exporter.py)                         | Script to export market metrics for all binance btc pairs at a frequency 1d                                                               | jsonl exporter      |
| [/timeseries/pair-candles](https://github.com/coinmetrics/api-client-python/blob/master/examples/market_data/pair_candles_json_exporter.py)                             | Script to export asset pair candles for all BTC spot and future markets at a 1h frequency                                                 | jsonl exporter      |
| [/market-candles-spot](https://github.com/coinmetrics/api-client-python/blob/master/examples/files_download/export_all_market_candles_daily.py)                         | Script that shows how to bulk downlaod market candles flat files data                                                                     | flat files exporter |
| [/market-quotes-future](https://github.com/coinmetrics/api-client-python/blob/master/examples/files_download/export_market_quotes_futures.py)                           | Script to show how to bulk download market quotes for futures markets for a full month                                                    | flat files exporter |
| [/market-trades-spot](https://github.com/coinmetrics/api-client-python/blob/master/examples/files_download/export_market_trades_spot_data.py)                           | Script to show to bulk download market trades spot data for a full month                                                                  | flat files exporter |
| [/market-quotes-spot](https://github.com/coinmetrics/api-client-python/blob/master/examples/files_download/export_binance_daily_binance_btcpairs_market_quotes_spot.py) | Script to show to bulk download market quotes spot data for a full month                                                                  | flat files exporter |
| [general api usage](https://github.com/coinmetrics/api-client-python/blob/master/examples/notebooks/sample_api_v4.ipynb)                                                | Notebook that gives a brief overview of the features offered by the CoinMetrics API/ API Client                                           | notebook            |
